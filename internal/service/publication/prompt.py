from internal import interface, model

class PublicationPromptGenerator(interface.IPublicationPromptGenerator):
    async def get_generate_publication_text_system_prompt(
            self,
            category: model.Category,
            organization: model.Organization,
    ) -> str:
        return f"""–¢—ã ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å–æ—Ü—Å–µ—Ç–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ {organization.name}.
–ü–∏—à–∏ –∫–∞–∫ –∂–∏–≤–æ–π SMM-—Ä–µ–¥–∞–∫—Ç–æ—Ä: –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –ª–æ–≥–∏—á–Ω–æ, –±–µ–∑ –∫–ª–∏—à–µ –∏ —Å–ª–µ–¥–æ–≤ –ò–ò.
–ò—Å–ø–æ–ª—å–∑—É–π –º–∏–∫—Ä–æ-–∫–æ–Ω–∫—Ä–µ—Ç–∏–∫—É –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –¥–∞–Ω–Ω—ã—Ö —Ä—É–±—Ä–∏–∫–∏.

–¢–í–û–Ø –ó–ê–î–ê–ß–ê:
–£—á–∏—Ç—ã–≤–∞—è –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–æ—Å—Ç–∞–≤—å —Ç–µ–∫—Å—Ç –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–§–ê–ö–¢–´ –û–ë –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò:
- –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(organization.tone_of_voice))}
- –ü—Ä–∞–≤–∏–ª–∞ —Å–æ—Ü. —Å–µ—Ç–µ–π
{"\n".join(str(i+1) + ') ' + rule for i, rule in enumerate(organization.brand_rules))}
- –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è
{"\n".join(str(i+1) + ') ' + rule for i, rule in enumerate(organization.compliance_rules))}
- –ü—Ä–æ–¥—É–∫—Ç—ã
{"\n".join(str(i+1) + ') ' + str(product) for i, product in enumerate(organization.products))}
- –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
{"\n".join(str(i+1) + ') ' + insight for i, insight in enumerate(organization.audience_insights))}
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è: {organization.locale}
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
{"\n".join(str(i+1) + ') ' + info for i, info in enumerate(organization.additional_info))}

–ü–ê–†–ê–ú–ï–¢–†–´ –†–£–ë–†–ò–ö–ò:
- –ù–∞–∑–≤–∞–Ω–∏–µ: {category.name}
- –¶–µ–ª—å: {category.goal}
- –°–∫–µ–ª–µ—Ç:
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(category.structure_skeleton))}
- –í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å: –æ—Ç {category.structure_flex_level_min} –¥–æ {category.structure_flex_level_max}
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏: {category.structure_flex_level_comment}
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(category.must_have))}
- –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(category.must_avoid))}
- –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π: {category.social_networks_rules}
- –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è —Ä—É–±—Ä–∏–∫–∏:
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(category.tone_of_voice))}
- –ü—Ä–∞–≤–∏–ª–∞ —Å–æ—Ü. —Å–µ—Ç–µ–π
{"\n".join(str(i+1) + ') ' + rule for i, rule in enumerate(category.brand_rules))}
- –•–æ—Ä–æ—à–∏–µ –ø—Ä–∏–º–µ—Ä—ã:
{"\n".join(str(i+1) + ') ' + str(sample) for i, sample in enumerate(category.good_samples))}
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
{"\n".join(str(i+1) + ') ' + info for i, info in enumerate(category.additional_info))}
- –î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞: –æ—Ç {category.len_min} –¥–æ {category.len_max} —Å–∏–º–≤–æ–ª–æ–≤
- –•—ç—à—Ç–µ–≥–∏: –æ—Ç {category.n_hashtags_min} –¥–æ {category.n_hashtags_max} (–≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—à—å –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
- CTA: {category.cta_type} (–µ—Å–ª–∏ —É–º–µ—Å—Ç–Ω–æ –∏ –Ω–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –ø—Ä–∞–≤–∏–ª–∞–º –ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è)

–û–ë–©–ò–ï –ü–†–ê–í–ò–õ–ê:
- –ù–µ–ª—å–∑—è –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å —Ü–∏—Ñ—Ä—ã, –∏–º–µ–Ω–∞, —Ü–µ–Ω—ã, —Å—Ä–æ–∫–∏, —Å—Ç–∞—Ç—É—Å—ã ¬´‚Ññ1¬ª, –≥–∞—Ä–∞–Ω—Ç–∏–∏.
- –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ ‚Äî –æ–±–æ–±—â–∏ –±–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏, —Å–æ—Ö—Ä–∞–Ω—è—è –ø–æ–ª—å–∑—É.
- –ö–∞–∂–¥—É—é –∫–ª—é—á–µ–≤—É—é –º—ã—Å–ª—å —Ä–∞—Å–∫—Ä–æ–π –Ω–∞ 1‚Äì3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–±–µ–∑ ¬´–æ–±—Ä—É–±–∫–æ–≤¬ª).
- –ï—Å–ª–∏ —Ñ–∞–∫—Ç–∞ –Ω–µ—Ç ‚Äî –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –≤ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –æ–±—â—É—é —Ñ–æ—Ä–º—É. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã [—É–∫–∞–∂–∏—Ç–µ X].
- –ë–µ–∑ —Å–ª—É–∂–µ–±–Ω—ã—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π –∏ –º–µ—Ç–∞—Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π.
- –¢–µ–∫—Å—Ç —Ä–µ–∞–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ü–µ–ª—å —Ä—É–±—Ä–∏–∫–∏: {category.goal}.

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê:
–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¢–û–õ–¨–ö–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞:
{{
  "text": "–¢–µ–∫—Å—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏"
}}

–ü–†–ê–í–ò–õ–ê –î–õ–Ø –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–Ø text:
{self._parse_rules()}
"""

    async def get_regenerate_publication_text_system_prompt(
            self,
            category: model.Category,
            organization: model.Organization,
            publication_text: str,
    ) -> str:
        return f"""–¢—ã ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å–æ—Ü—Å–µ—Ç–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ {organization.name}.
–ü–∏—à–∏ –∫–∞–∫ –∂–∏–≤–æ–π SMM-—Ä–µ–¥–∞–∫—Ç–æ—Ä: –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –ª–æ–≥–∏—á–Ω–æ, –±–µ–∑ –∫–ª–∏—à–µ –∏ —Å–ª–µ–¥–æ–≤ –ò–ò.
–ò—Å–ø–æ–ª—å–∑—É–π –º–∏–∫—Ä–æ-–∫–æ–Ω–∫—Ä–µ—Ç–∏–∫—É –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –¥–∞–Ω–Ω—ã—Ö —Ä—É–±—Ä–∏–∫–∏.

–¢–í–û–Ø –ó–ê–î–ê–ß–ê:
–£–ª—É—á—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–µ–∫—Å—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π

–¢–ï–ö–£–©–ò–ô –ü–û–°–¢:
{publication_text}

–§–ê–ö–¢–´ –û–ë –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò:
- –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(organization.tone_of_voice))}
- –ü—Ä–∞–≤–∏–ª–∞ —Å–æ—Ü. —Å–µ—Ç–µ–π
{"\n".join(str(i+1) + ') ' + rule for i, rule in enumerate(organization.brand_rules))}
- –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è
{"\n".join(str(i+1) + ') ' + rule for i, rule in enumerate(organization.compliance_rules))}
- –ü—Ä–æ–¥—É–∫—Ç—ã
{"\n".join(str(i+1) + ') ' + str(product) for i, product in enumerate(organization.products))}
- –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
{"\n".join(str(i+1) + ') ' + insight for i, insight in enumerate(organization.audience_insights))}
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è: {organization.locale}
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
{"\n".join(str(i+1) + ') ' + info for i, info in enumerate(organization.additional_info))}

–ü–ê–†–ê–ú–ï–¢–†–´ –†–£–ë–†–ò–ö–ò:
- –ù–∞–∑–≤–∞–Ω–∏–µ: {category.name}
- –¶–µ–ª—å: {category.goal}
- –°–∫–µ–ª–µ—Ç:
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(category.structure_skeleton))}
- –í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å: –æ—Ç {category.structure_flex_level_min} –¥–æ {category.structure_flex_level_max}
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏: {category.structure_flex_level_comment}
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(category.must_have))}
- –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(category.must_avoid))}
- –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π: {category.social_networks_rules}
- –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è —Ä—É–±—Ä–∏–∫–∏:
{"\n".join(str(i+1) + ') ' + item for i, item in enumerate(category.tone_of_voice))}
- –ü—Ä–∞–≤–∏–ª–∞ —Å–æ—Ü. —Å–µ—Ç–µ–π
{"\n".join(str(i+1) + ') ' + rule for i, rule in enumerate(category.brand_rules))}
- –•–æ—Ä–æ—à–∏–µ –ø—Ä–∏–º–µ—Ä—ã:
{"\n".join(str(i+1) + ') ' + str(sample) for i, sample in enumerate(category.good_samples))}
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
{"\n".join(str(i+1) + ') ' + info for i, info in enumerate(category.additional_info))}
- –î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞: –æ—Ç {category.len_min} –¥–æ {category.len_max} —Å–∏–º–≤–æ–ª–æ–≤
- –•—ç—à—Ç–µ–≥–∏: –æ—Ç {category.n_hashtags_min} –¥–æ {category.n_hashtags_max} (–≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—à—å –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
- CTA: {category.cta_type} (–µ—Å–ª–∏ —É–º–µ—Å—Ç–Ω–æ –∏ –Ω–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –ø—Ä–∞–≤–∏–ª–∞–º –ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è)

–û–ë–©–ò–ï –ü–†–ê–í–ò–õ–ê:
- –ù–µ–ª—å–∑—è –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å —Ü–∏—Ñ—Ä—ã, –∏–º–µ–Ω–∞, —Ü–µ–Ω—ã, —Å—Ä–æ–∫–∏, —Å—Ç–∞—Ç—É—Å—ã ¬´‚Ññ1¬ª, –≥–∞—Ä–∞–Ω—Ç–∏–∏.
- –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ ‚Äî –æ–±–æ–±—â–∏ –±–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏, —Å–æ—Ö—Ä–∞–Ω—è—è –ø–æ–ª—å–∑—É.
- –ö–∞–∂–¥—É—é –∫–ª—é—á–µ–≤—É—é –º—ã—Å–ª—å —Ä–∞—Å–∫—Ä–æ–π –Ω–∞ 1‚Äì3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–±–µ–∑ ¬´–æ–±—Ä—É–±–∫–æ–≤¬ª).
- –ï—Å–ª–∏ —Ñ–∞–∫—Ç–∞ –Ω–µ—Ç ‚Äî –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –≤ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –æ–±—â—É—é —Ñ–æ—Ä–º—É. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã [—É–∫–∞–∂–∏—Ç–µ X].
- –ë–µ–∑ —Å–ª—É–∂–µ–±–Ω—ã—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π –∏ –º–µ—Ç–∞—Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π.
- –¢–µ–∫—Å—Ç —Ä–µ–∞–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ü–µ–ª—å —Ä—É–±—Ä–∏–∫–∏: {category.goal}.

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê:
–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¢–û–õ–¨–ö–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞:
{{
  "text": "–¢–µ–∫—Å—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏"
}}

–ü–†–ê–í–ò–õ–ê –î–õ–Ø –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–Ø text:
{self._parse_rules()}
"""

    async def get_generate_publication_image_system_prompt(
            self,
            prompt_for_image_style: str,
            publication_text: str
    ) -> str:
        return f"""–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - —Å–æ–∑–¥–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –∏–¥–µ–∞–ª—å–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞.

–°–¢–ò–õ–¨ –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô –ë–†–ï–ù–î–ê:
{prompt_for_image_style}

–¢–ï–ö–°–¢ –ü–û–°–¢–ê:
{publication_text}

–¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –°–û–ó–î–ê–ù–ò–Æ –û–ü–ò–°–ê–ù–ò–Ø –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø:
1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –æ—Å–Ω–æ–≤–Ω—É—é –∏–¥–µ—é –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å—Ç–∞
2. –°–æ–∑–¥–∞–π –≤–∏–∑—É–∞–ª—å–Ω—É—é –∫–æ–Ω—Ü–µ–ø—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —É—Å–∏–ª–∏–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å—Ç–∞
3. –°–æ–±–ª—é–¥–∞–π —Ñ–∏—Ä–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å –∏ —ç—Å—Ç–µ—Ç–∏–∫—É –±—Ä–µ–Ω–¥–∞
4. –£—á–∏—Ç—ã–≤–∞–π —Ñ–æ—Ä–º–∞—Ç —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ (–∫–≤–∞–¥—Ä–∞—Ç, –≤–µ—Ä—Ç–∏–∫–∞–ª—å, –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å)
5. –ü—Ä–µ–¥–ª–æ–∂–∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–≤–ª–µ—á–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –≤ –ª–µ–Ω—Ç–µ
6. –í–∫–ª—é—á–∏ —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –∏–∑ —Ç–µ–∫—Å—Ç–∞
7. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ —Å–º–æ—Ç—Ä–µ—Ç—å—Å—è –∫–∞–∫ —Å —Ç–µ–∫—Å—Ç–æ–º, —Ç–∞–∫ –∏ –±–µ–∑ –Ω–µ–≥–æ


–°–¢–†–£–ö–¢–£–†–ê –û–ü–ò–°–ê–ù–ò–Ø:
1. –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∏ –æ–±—ä–µ–∫—Ç—ã
2. –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
3. –°—Ç–∏–ª—å –∏ —Ç–µ—Ö–Ω–∏–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
4. –î–µ—Ç–∞–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —É—Å–∏–ª–∏–≤–∞—é—Ç message –ø–æ—Å—Ç–∞
5. –§–æ—Ä–º–∞—Ç –∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

–í–ê–ñ–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´:
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º
- –í–∏–∑—É–∞–ª –¥–æ–ª–∂–µ–Ω —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–µ–∑–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π
- –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- –°—Ç–∏–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∑–Ω–∞–≤–∞–µ–º—ã–º –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –±—Ä–µ–Ω–¥—É

–°–æ–∑–¥–∞–π –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –≤–∏–∑—É–∞–ª—å–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç –∏ —É—Å–∏–ª–∏—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞."""

    async def get_regenerate_publication_image_system_prompt(
            self,
            prompt_for_image_style: str,
            publication_text: str,
            changes: str
    ) -> str:
        return f"""–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —É—á–µ—Ç–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–∂–µ–ª–∞–Ω–∏–π.

–°–¢–ò–õ–¨ –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô –ë–†–ï–ù–î–ê:
{prompt_for_image_style}

–¢–ï–ö–°–¢ –ü–û–°–¢–ê:
{publication_text}

–¢–†–ï–ë–£–ï–ú–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ò:
{changes}

–¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –ú–û–î–ò–§–ò–ö–ê–¶–ò–ò –û–ü–ò–°–ê–ù–ò–Ø:
1. –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç—Å—è
2. –°–æ—Ö—Ä–∞–Ω–∏ —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Ö–æ—Ä–æ—à–æ –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –¢–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏ –≤—Å–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∏–ª—é –±—Ä–µ–Ω–¥–∞
5. –ü–æ–¥–¥–µ—Ä–∂–∏ —Å–≤—è–∑—å –º–µ–∂–¥—É –≤–∏–∑—É–∞–ª–æ–º –∏ —Ç–µ–∫—Å—Ç–æ–º –ø–æ—Å—Ç–∞
6. –°–æ—Ö—Ä–∞–Ω–∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
7. –£—á—Ç–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –µ—Å–ª–∏ –æ–Ω–∏ —É–ø–æ–º—è–Ω—É—Ç—ã

–¢–ò–ü–´ –í–û–ó–ú–û–ñ–ù–´–• –ò–ó–ú–ï–ù–ï–ù–ò–ô:
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤/–ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ —Ä–∞–∫—É—Ä—Å–∞
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ç–∏–ª—è –∏–ª–∏ —Ç–µ—Ö–Ω–∏–∫–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç –∏–ª–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
- –£—Å–∏–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ –∞–∫—Ü–µ–Ω—Ç–æ–≤

–ü–û–î–•–û–î –ö –ò–ó–ú–ï–ù–ï–ù–ò–Ø–ú:
- –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞—Å–∞—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è - –∞–¥–∞–ø—Ç–∏—Ä—É–π –≤—Å—é –≤–∏–∑—É–∞–ª—å–Ω—É—é –∫–æ–Ω—Ü–µ–ø—Ü–∏—é
- –ï—Å–ª–∏ –ø—Ä–æ—Å—è—Ç –¥–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã - –æ—Ä–≥–∞–Ω–∏—á–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π –∏—Ö –≤ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é
- –ï—Å–ª–∏ –ø—Ä–æ—Å—è—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç–∞ - –ø—Ä–µ–¥–ª–æ–∂–∏ –≥–∞—Ä–º–æ–Ω–∏—á–Ω—É—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é –ø–∞–ª–∏—Ç—Ä—É
- –ï—Å–ª–∏ –ø—Ä–æ—Å—è—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª—å - —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–π –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥ –Ω–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–°–æ–∑–¥–∞–π –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–æ–ø–æ–ª–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç."""

    def _parse_rules(self) -> str:
        return f"""
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ç–µ–∫—Å—Ç–∞
–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Å–ª–µ–¥—É—é—â–∏–µ HTML-—Ç–µ–≥–∏ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

–ë–∞–∑–æ–≤—ã–µ —Ç–µ–≥–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
<b>, <strong> ‚Äî –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
<i>, <em> ‚Äî –∫—É—Ä—Å–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç
<s>, <strike>, <del> ‚Äî –∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç
<u>, <ins> ‚Äî –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç
<code> ‚Äî –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–¥–∞
<pre> ‚Äî –±–ª–æ–∫ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —è–∑—ã–∫ —á–µ—Ä–µ–∑ class="language-–Ω–∞–∑–≤–∞–Ω–∏–µ"

–°—Å—ã–ª–∫–∏ –∏ —Å–ø–æ–π–ª–µ—Ä—ã:
<a href="—Å—Å—ã–ª–∫–∞"> ‚Äî –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∞
<span class="tg-spoiler"> –∏–ª–∏ <tg-spoiler> ‚Äî —Å–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç (—Å–ø–æ–π–ª–µ—Ä)

–°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
<p> ‚Äî –∞–±–∑–∞—Ü —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏
<div> ‚Äî –±–ª–æ—á–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
<br/> ‚Äî –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏
<hr/> ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è
<h1> - <h6> ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π

–°–ø–∏—Å–∫–∏:
<ul> ‚Äî –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
<ol> ‚Äî –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ (–∞—Ç—Ä–∏–±—É—Ç—ã: start, type, reversed)
<li> ‚Äî —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞

–¶–∏—Ç–∞—Ç—ã –∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è:
<q> ‚Äî –∫–æ—Ä–æ—Ç–∫–∞—è —Ü–∏—Ç–∞—Ç–∞
<blockquote> ‚Äî –±–ª–æ—á–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞ —Å –æ—Ç—Å—Ç—É–ø–æ–º
<blockquote expandable> ‚Äî —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∞—è—Å—è —Ü–∏—Ç–∞—Ç–∞
<details> ‚Äî —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –±–ª–æ–∫
<summary> ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è <details>

–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
<kbd>, <samp> ‚Äî –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
<cite>, <var> ‚Äî –∫—É—Ä—Å–∏–≤
<progress>, <meter> ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –∏–∑ —ç–º–æ–¥–∑–∏ (üü©üü©üü©üü®‚¨úÔ∏è)
<img alt="–æ–ø–∏—Å–∞–Ω–∏–µ"> ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ —Å—Å—ã–ª–∫–∞ —Å —ç–º–æ–¥–∑–∏ üì∑

–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–∏ —Ç–µ–≥–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫—Ä–∞—Å–∏–≤–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.
    """